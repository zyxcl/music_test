import{g as a,h as l,O as e,k as s,l as t,o as r,c as o,w as i,a as n,P as c,b as u,p as d,A as f,t as m,x as p,F as v,Q as _,v as y,i as b,y as g,R as k,m as h}from"./index-DUCY3sGl.js";import{_ as j}from"./uni-icons.CY5ChEgQ.js";import{_ as C}from"./mIcon.BTisRypd.js";import{u as x,a as I,_ as w}from"./music.DvlEjsMS.js";import{_ as z}from"./comment.D-YVL_I4.js";import{a as U}from"./playerBar.CA4T8h14.js";import{_ as A}from"./plugin-vueexport-helper.BCo6x5W8.js";import"./uni-section.Dlgk2sdT.js";import"./playlistCard.oeN0qzdv.js";const F=A(a({__name:"songlist",setup(a){const A=x(),F=l({}),S=l(!1),B=l("");e((a=>{B.value=a.id,(async a=>{const l=await _(a);F.value=l.playlist})(a.id)}));const D=()=>{const a=F.value.trackIds.map((a=>a.id));A.playAllSongs(a),y({url:"/pages/player/player"})};return(a,l)=>{const e=b,_=g,x=s(t("uni-icons"),j),O=s(t("mIcon"),C),P=s(t("uni-list-item"),I),Q=s(t("uni-list"),w),R=s(t("comment"),z),$=s(t("playerBar"),U);return r(),o($,null,{default:i((()=>[n(e,{class:"header"},{default:i((()=>[c("div",{class:"bg",style:u({backgroundImage:`url(${F.value.coverImgUrl})`})},[n(e,{class:"after"})],4),n(e,{class:"header-content"},{default:i((()=>[n(e,{class:"info"},{default:i((()=>[n(_,{src:F.value.coverImgUrl,mode:"widthFix"},null,8,["src"]),n(e,{class:"header-right"},{default:i((()=>[n(e,{class:"title"},{default:i((()=>[d(f(F.value.name),1)])),_:1}),n(e,{class:"creator"},{default:i((()=>{var a;return[n(_,{src:null==(a=F.value.creator)?void 0:a.avatarUrl,mode:"widthFix"},null,8,["src"]),n(e,{class:"nickname"},{default:i((()=>{var a;return[d(f(null==(a=F.value.creator)?void 0:a.nickname),1)]})),_:1})]})),_:1})])),_:1})])),_:1}),n(e,{class:"desc"},{default:i((()=>[d(f(F.value.description),1)])),_:1}),n(e,{class:"btns"},{default:i((()=>[n(e,{class:"btn"},{default:i((()=>[n(x,{type:"redo-filled",size:"20",color:"#ffffff"}),d(" "+f(F.value.shareCount||"分享"),1)])),_:1}),n(e,{class:"btn",onClick:l[0]||(l[0]=a=>S.value=!0)},{default:i((()=>[n(x,{type:"chat-filled",size:"20",color:"#ffffff"}),d(" "+f(F.value.commentCount||"评论"),1)])),_:1}),n(e,{class:"btn"},{default:i((()=>[n(x,{type:"folder-add-filled",size:"20",color:"#ffffff"}),d(" "+f(F.value.subscribedCount||"收藏"),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(e,{class:"song-list"},{default:i((()=>[n(Q,{border:!0},{default:i((()=>[n(P,{clickable:"",onClick:D},{header:i((()=>[n(O,{type:"bofang2",color:"#c84341",size:26})])),body:i((()=>[n(e,{class:"play-all"},{default:i((()=>[d("播放全部("+f(F.value.trackCount)+")",1)])),_:1})])),_:1}),(r(!0),m(v,null,p(F.value.tracks,((a,l)=>{return r(),o(P,{key:a.id,title:a.name,note:(s=a.ar,s.map((a=>a.name)).join("/")),ellipsis:"1",showArrow:"",clickable:"",onClick:l=>(a=>{A.addSong(a),y({url:"/pages/player/player"})})(a)},k({header:i((()=>[n(e,{class:"no"},{default:i((()=>[d(f(l+1),1)])),_:2},1024)])),_:2},[h(A).curSongDetail.id===a.id?{name:"footer",fn:i((()=>[n(e,{class:"right-text"},{default:i((()=>[d("正在播放")])),_:1})])),key:"0"}:void 0]),1032,["title","note","onClick"]);var s})),128))])),_:1})])),_:1}),n(R,{visible:S.value,"onUpdate:visible":l[1]||(l[1]=a=>S.value=a),type:"playlist",id:B.value},null,8,["visible","id"])])),_:1})}}}),[["__scopeId","data-v-ba93068a"]]);export{F as default};
